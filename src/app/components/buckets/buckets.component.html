<app-side-nav></app-side-nav>
<app-global-header [Label]="dataToSend" (outputData)="clickFolder($event)" (view_con)="type($event)" [tabname]="TabName"
    [Back]="BackIndexVal" [Forward]="FrontIndexVal"></app-global-header>

<ng-container *ngIf="bucketsView">
    <div class="container-fluid">
        <div class=" main-container ">
            <ng-container *ngIf="viewtype=='grid'">
                <div class="row row-cols-4 ">
                    <div class=" mb-4 col col-sm-6 col-lg-3 col-xxl-2" *ngFor="let bucket of allBuckets">
                        <div class="card folder-card" (click)="bucketClick(bucket?.name)">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start ">
                                    <img src="../../../assets/paper folder with documents.png" class="folders mb-3 "
                                        alt="">
                                    <img src="../../../assets/ph_dots-three-bold.png"
                                        class="object-fit-contain three-dots" alt="">
                                </div>
                                <p class="card-title fw-bold m-0">{{bucket?.name}}</p>
                                <p class="card-text ">{{bucket?.objects}} Objects</p>
                            </div>
                            <div class="card-footer d-flex align-items-center justify-content-between ">
                                <a href="#" class="nav-link text-dark p-0">View</a>
                                <i class="ri-arrow-right-line"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="viewtype=='list'">
                <table class="table table-striped table-hover ">
                    <thead>
                        <tr class="table-secondary text-center ">
                            <th colspan="1" class="text-start " scope="col">Name</th>
                            <th scope="col">Objects <i class="ri-arrow-up-line"></i></th>
                            <th scope="col">Created Date <i class="ri-arrow-up-line"></i></th>
                            <th scope="col">Size <i class="ri-arrow-down-line"></i></th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr class=" body-tr" *ngFor="let bucket of allBuckets" (click)="bucketClick(bucket?.name)">
                            <td colspan="1" class="text-center">
                                <div class=" d-flex gap-2 justify-content-start"><img
                                        src=" ../../../assets/paper folder with documents.png" class="list-folder mb-3 "
                                        alt=""> {{bucket.name}}
                                </div>
                            </td>
                            <td class="text-center ">{{bucket?.objects}} Objects</td>
                            <td class="text-center ">{{bucket?.created | date}}</td>
                            <td class="text-center ">{{bucket?.size}}</td>
                        </tr>
                    </tbody>
                </table>
            </ng-container>
        </div>
    </div>
</ng-container>


<ng-container *ngIf="!bucketsView">
    <div class="container-fluid">
        <div class=" main-container ">
            <!--Folder Card-->
            <div class="folder-con">
                <ng-container *ngIf="viewtype=='grid'">
                    <div *ngFor="let bucket of singleBucketsData">
                        <div>
                            <div class="row row-cols-1">
                                <ng-container *ngFor="let files of bucket.files">
                                    <div class=" mb-4 col-3" *ngIf="files?.type=='folder'"
                                        (click)="innerFolderNavigation(files?.files,bucket,files?.folderName,files?.path,files)">
                                        <div class="card folder-card">
                                            <div class=" card-body">
                                                <div class="d-flex justify-content-between align-items-start ">
                                                    <img src="../../../assets/paper folder with documents.png"
                                                        class="folders mb-3 " alt="">
                                                    <img src="../../../assets/ph_dots-three-bold.png"
                                                        class="object-fit-contain three-dots" alt="">
                                                </div>
                                                <p class="card-title fw-bold m-0">{{files?.folderName}}</p>
                                            </div>
                                            <div class="card-footer d-flex align-items-center justify-content-between ">
                                                <a href="#" class="nav-link text-dark p-0">View</a>
                                                <i class="ri-arrow-right-line"></i>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </ng-container>

                <ng-container *ngIf="viewtype=='list'">
                    <table class="table table-striped table-hover ">
                        <thead>
                            <tr class="table-secondary  ">
                                <th colspan="1" scope="col">Name</th>
                                <!-- <th scope="col">objects <i class="ri-arrow-up-line"></i></th> -->
                                <!-- <th scope="col">Created Date <i class="ri-arrow-up-line"></i></th> -->
                                <th scope="col">Size <i class="ri-arrow-down-line"></i></th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <ng-container *ngFor="let bucket of singleBucketsData">
                            <ng-container *ngFor="let files of bucket.files">
                                <tbody *ngIf="files?.type=='folder'">
                                    <tr class=" body-tr"
                                        (click)="
                                        innerFolderNavigation(files?.files,bucket,files?.folderName,files?.path,files)">
                                        <td colspan="1">
                                            <div class=" d-flex gap-2 justify-content-start "><img
                                                    src=" ../../../assets/paper folder with documents.png"
                                                    class="list-folder mb-3 " alt=""> {{files?.folderName}}
                                            </div>
                                        </td>
                                        <!-- <td class="text-center ">{{bucket?.length}} Objects</td> -->
                                        <!-- <td class="text-center ">{{bucket?.length}} Objects</td> -->
                                        <td>{{bucket?.length}} Objects</td>
                                        <td class=""><i class="ms-3 ri-download-2-line "></i></td>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="files?.type=='file'">
                                    <tr data-bs-toggle="tooltip" data-bs-placement="bottom" [title]="files?.filename"
                                        class=" body-tr">
                                        <td colspan="1" class="">
                                            <div class=" d-flex gap-2 ">
                                                <img clas *ngIf="files?.filetype=='.pdf'" src="../../../assets/pdf.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.xlsx'"
                                                    src="../../../assets/excel.svg" class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.csv'" src="../../../assets/csv.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.docx'"
                                                    src="../../../assets/docx.svg" class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.pptx'" src="../../../assets/ppt.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.jpg'" src="../../../assets/jpg.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="!extensionsArray.includes(files.filetype)"
                                                    src="../../../assets/plain.svg" class="folder" alt="">
                                                {{files?.filename}}
                                            </div>
                                        </td>
                                        <!-- <td class=" ">{{bucket?.length}} Objects</td> -->
                                        <td>{{bucket?.length}} Objects</td>
                                        <!-- <td class=" ">{{bucket?.length}} Objects</td> -->
                                        <td><i class="ri-download-2-line ms-3 "></i></td>
                                    </tr>
                                </tbody>
                            </ng-container>
                        </ng-container>

                    </table>
                </ng-container>
            </div>
            <!--Files Card-->
            <div class="files-con">
                <ng-container *ngIf="viewtype=='grid'">
                    <div *ngFor="let bucket of singleBucketsData">
                        <div class="row row-cols-4 ">
                            <ng-container *ngFor="let files of bucket?.files">
                                <div class=" mb-4 col col-sm-6 col-lg-3 col-xxl-2" *ngIf="files?.type=='file'">
                                    <div class="card folder-card">
                                        <div class=" card-body p-0 m-0" data-bs-toggle="tooltip"
                                            data-bs-placement="bottom" [title]="files?.filename">
                                            <div class="d-flex justify-content-between p-2 gap-2 align-items-center ">
                                                <img clas *ngIf="files?.filetype=='.pdf'" src="../../../assets/pdf.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.xlsx'"
                                                    src="../../../assets/excel.svg" class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.csv'" src="../../../assets/csv.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.docx'"
                                                    src="../../../assets/docx.svg" class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.pptx'" src="../../../assets/ppt.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.jpg'" src="../../../assets/jpg.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="!extensionsArray.includes(files.filetype)"
                                                    src="../../../assets/plain.svg" class="folder" alt="">
                                                <p class="card-title card-title-1 fw-bold m-0">{{files?.filename}}
                                                </p>
                                                <div class="m-0 d-flex align-items-baseline ">
                                                    <img src="../../../assets/ph_dots-three-bold.png"
                                                        class="object-fit-contain three-dots-1" alt="">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </ng-container>

                <!-- <ng-container *ngIf="viewtype=='list'">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr class="table-secondary  ">
                                <th colspan="1" scope="col">Name</th>
                                <th scope="col">Size <i class="ri-arrow-down-line"></i></th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <ng-container *ngFor="let bucket of singleBucketsData">
                            <ng-container *ngFor="let files of bucket?.files">
                                <tbody *ngIf="files?.type=='file'">
                                    <tr data-bs-toggle="tooltip" data-bs-placement="bottom" [title]="files?.filename"
                                        class=" body-tr">
                                        <td colspan="1" class="">
                                            <div class=" d-flex gap-2 ">
                                                <img clas *ngIf="files?.filetype=='.pdf'" src="../../../assets/pdf.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.xlsx'"
                                                    src="../../../assets/excel.svg" class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.csv'" src="../../../assets/csv.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.docx'"
                                                    src="../../../assets/docx.svg" class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.pptx'" src="../../../assets/ppt.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="files?.filetype=='.jpg'" src="../../../assets/jpg.svg"
                                                    class="folder" alt="">
                                                <img clas *ngIf="!extensionsArray.includes(files.filetype)"
                                                    src="../../../assets/plain.svg" class="folder" alt="">
                                                {{files?.filename}}
                                            </div>
                                        </td>
                                        <td class=" ">{{bucket?.length}} Objects</td>
                                        <td class=" ">{{bucket?.length}} Objects</td>
                                        <td class=" ">{{bucket?.length}} Objects</td>
                                        <td><i class="ri-download-2-line ms-3 "></i></td>
                                    </tr>
                                </tbody>

                            </ng-container>
                        </ng-container>
                    </table>
                </ng-container> -->
            </div>
        </div>
    </div>
</ng-container>